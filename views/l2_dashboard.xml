<odoo>
    <!-- Form View with widget -->
    <record id="view_l2_dashboard_form" model="ir.ui.view">
        <field name="name">l2.dashboard.form</field>
        <field name="model">l2.dashboard</field>
        <field name="arch" type="xml">
            <form string="L2 Dashboard" class="dashboard-form" create="0" edit="0" style="position: relative;">
                <style>
                    .o_control_panel {
                        border-bottom: 0;
                        padding-top: 0;
                        padding-right: 0;
                        padding-bottom: 0;
                        padding-left: 0;
                        visibility: hidden;
                    }
                    .o_form_nosheet {
                        padding-top: 0;
                    }
                    .section-header {
                        background-color: #004b8d !important;
                        text-align: center !important;
                        color: #fff !important;
                        font-weight: 700 !important;
                        padding: 10px 0 !important;
                        border-radius: 6px 6px 0 0;
                        letter-spacing: 0.5px;
                    }
                
                    .section-header h5 {
                        color: #fff !important;
                        font-weight: 700 !important;
                        margin: 0;
                        font-size: 1.1rem;
                    }
                
                    .section-header i {
                        color: #fff !important;
                    }
                </style>
                <div class="o_form_view_container" style="width: 100%; margin: auto;">
                    <!-- Header section -->
                    <div class="row g-3 align-items-center mb-2" style="border-bottom:1px solid #e9eef5;padding:.35rem 0 .75rem;">
                        <!-- Left: Back to L1 -->
                        <div class="col-12 col-md-4 d-flex">
                            <button name="action_back_to_l1"
                                    type="object"
                                    class="btn btn-outline-secondary rounded-pill shadow-sm d-inline-flex align-items-center"
                                    style="border-color:#e2e8f0;">
                                <i class="fa fa-chevron-left me-2"></i>
                                <span class="fw-semibold">Back to L1</span>
                            </button>
                        </div>
                    
                        <!-- Center: Title -->
                        <div class="col-12 col-md-4 text-center">
                            <h1 class="my-0" style="font-weight:700;letter-spacing:.2px;">L2 Dashboard</h1>
                        </div>
                    
                        <!-- Right: Year + Download -->
                        <div class="col-12 col-md-4 d-flex justify-content-md-end align-items-center" style="gap:10px;">
                            <field name="year" class="mx-1 my-1"/>
                            <button name="action_export_excel"
                                    type="object"
                                    class="btn btn-primary rounded-pill shadow-sm"
                                    style="min-width:160px;">
                                <i class="fa fa-download me-2"></i>Download Excel
                            </button>
                        </div>
                    </div>
                
                    <!-- Last update info -->
                    <div class="row mb-3">
                        <div class="col-12 text-end pe-3">
                            <span>Last update: <field name="last_update" readonly="1" class="d-inline"/></span>
                        </div>
                    </div>
                
                    <!-- Dashboard content -->
                    <field name="dashboard_data" readonly="1" nolabel="1" widget="l2_dashboard" class="d-block">
                        <attribute name="options">
                            { "custom_display": "true" }
                        </attribute>
                        <attribute name="style">display: block !important;</attribute>
                    </field>
                
                    <!-- Hidden fields -->
                    <field name="company_id" groups="base.group_multi_company" invisible="1"/>
                    <field name="currency_id" invisible="1"/>
                </div>
                
            </form>
        </field>
    </record>

    <!-- Act Window -->
    <record id="action_l2_dashboard" model="ir.actions.act_window">
        <field name="name">L2 Dashboard</field>
        <field name="res_model">l2.dashboard</field>
        <field name="view_mode">form</field>
        <field name="view_id" ref="view_l2_dashboard_form"/>
        <field name="target">current</field>
    </record>
</odoo>
